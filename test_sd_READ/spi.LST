"File: spi.c         Assembler  Version HGASM0202      Page 1


   1  0000              ; Generated by holtek-gcc v3.14, Tue Jun 05 09:53:30 2018
   2  0000              ; 
   3  0000              ; Configuration:
   4  0000              ;       without long instruction
   5  0000              ;       Single ROM, Multi-RAM
   6  0000              ;       bits_per_rom_unit:16
   7  0000              ;       with mp1
   8  0000              ;       with tbhp, address(0x9)
   9  0000              ;          Use tabrd-const
  10  0000              ;       
  11  0000              ;       
  12  0000              ;       
  13  0000              ; use 'tabrdc' instead of 'tabrd'
  14  0000              ;       
  15  0000              
  16  0000              #pragma translator "holtek-gcc 4.6.4" "3.14" "build 20130711"
  17  0000              ; Rebuild 10
  18  0000              
  19  0000              ir equ [2]
  20  0000              mp equ [3]
  21  0000              sbp equ [1]
  22  0000              acc equ [5]
  23  0000              bp equ [4]
  24  0000              tblp equ [7]
  25  0000              tbhp equ [9]
  26  0000              status equ [10]
  27  0000              c equ [10].0
  28  0000              ac equ [10].1
  29  0000              z equ [10].2
  30  0000              ov equ [10].3
  31  0000              intc equ [11]
  32  0000              
  33  0000              extern ra:byte
  34  0000              extern rb:byte
  35  0000              extern rc:byte
  36  0000              extern rd:byte
  37  0000              extern re:byte
  38  0000              extern rf:byte
  39  0000              extern rg:byte
  40  0000              extern rh:byte
  41  0000              extern _Crom2Prom:near
  42  0000              extern _Crom2PromNext:near
  43  0000              
  44  0000              RAMBANK 0 @HCCINIT, @HCCINIT0
  45  0000              
  46  0000              RAMBANK 0 @BITDATASEC, @BITDATASEC1
  47  0000              @HCCINIT	.section 'data'
  48  0000              @HCCINIT0	.section 'data'
  49  0000              @BITDATASEC	 .section 'data'
  50  0000              @BITDATASEC1	 .section 'data'
  51  0000              
  52  0000              #pragma debug scope 1 1
  53  0000              	extern __DELAY3:near
  54  0000              	extern __DELAYX3:near
  55  0000              	extern __DELAYX6:near
  56  0000              	extern __DELAYY5:near
  57  0000              	extern __DELAYY3:near
  58  0000              	extern _builtin_holtek_delay_2:byte
  59  0000              ___pdc equ [83]
"File: spi.ASM       Assembler  Version HGASM0202      Page 2

  60  0000              ___simc0 equ [69]
  61  0000              ___simc2 equ [72]
  62  0000              public _SPI_init
  63  0000              #pragma debug scope 2 1

  11  0000              #line 11 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  11  0000              _SPI_init .section 'code'
  11  0000              _SPI_init proc
  13  0000              #line 13 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  13  0000  1F00     R  	clr _count[0]
  14  0001              #line 14 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  14  0001  3453        	clr [83].0
  14  0002  1F45        	clr [69]
  14  0003  1F48        	clr [72]
  14  0004  0745        	mov a,[69]
  14  0005  0E1F        	and a,31
  14  0006  0080     E  	mov ra,a
  14  0007  3000     E  	set ra.6
  14  0008  0700     E  	mov a,ra
  14  0009  00C5        	mov [69],a
  14  000A  0FCF        	mov a,207
  14  000B  06C8        	andm a,[72]
  14  000C  31C8        	set [72].3
  14  000D  3148        	set [72].2
  14  000E  30C5        	set [69].1
  14  000F  0003        	ret
  14  0010              _SPI_init endp
  14  0010              #line 14 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  14  0010              #pragma debug scope 1 1
  14  0010              public _SPI_update
  14  0010              #pragma debug scope 3 1
  18  0010              #line 18 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  18  0000              _SPI_update .section 'code'
  18  0000              _SPI_update proc
  18  0000  0003        	ret
  18  0001              _SPI_update endp
  18  0001              #line 18 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  18  0001              #pragma debug scope 1 1
  18  0001              ___simd equ [71]
  18  0001              public _SPI_transmit
  18  0001              #pragma debug scope 4 1
  22  0001              #line 22 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  22  0000              _SPI_transmit .section 'code'
  22  0000              _SPI_transmit proc
  22  0000  00              local _SPI_transmit_2 db 1 dup(?)	; 0,1
  22  0000  0080     R  	mov _SPI_transmit_2[0],a
  22  0001              #pragma debug variable 8 4 _SPI_transmit_2+0 "_data"
  23  0001              #line 23 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  23  0001  3448        	clr [72].0
  23  0002  0700     R  	mov a,_SPI_transmit_2[0]
  23  0003  00C7        	mov [71],a
  23  0004              _L5:
  23  0004              #line 23 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  23  0004  0748        	mov a,[72]
  23  0005  0E01        	and a,1
  23  0006  0080     E  	mov ra,a
  23  0007  0748        	mov a,[72]
  23  0008  0080     E  	mov rb,a
  23  0009  1F00     E  	clr rc
  23  000A  1400     E  	inca ra
"File: spi.c         Assembler  Version HGASM0202      Page 3

  23  000B  2800     R  	jmp _LI1
  23  000C              _LI2:
  23  000C  340A        	clr c
  23  000D  3C00     E  	sz rc.7
  23  000E  300A        	set c
  23  000F  1B80     E  	rrc rc
  23  0010  1B80     E  	rrc rb
  23  0011              _LI1:
  23  0011  1785        	sdz acc
  23  0012  2800     R  	jmp _LI2
  23  0013  3800     E  	snz rb.0
  23  0014  2800     R  	jmp _L5
  23  0015  3448        	clr [72].0
  23  0016  0747        	mov a,[71]
  23  0017  0080     E  	mov ra,a
  25  0018              #line 25 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  25  0018  0700     E  	mov a,ra
  25  0019  0003        	ret
  25  001A              _SPI_transmit endp
  25  001A              #line 25 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  25  001A              #pragma debug scope 1 1
  25  001A              ___pd equ [82]
  25  001A              public _SPI_cs_enable
  25  001A              #pragma debug scope 5 1
  28  001A              #line 28 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  28  0000              _SPI_cs_enable .section 'code'
  28  0000              _SPI_cs_enable proc
  29  0000              #line 29 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  29  0000  3452        	clr [82].0
  29  0001  0003        	ret
  29  0002              _SPI_cs_enable endp
  29  0002              #line 29 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  29  0002              #pragma debug scope 1 1
  29  0002              public _SPI_cs_disable
  29  0002              #pragma debug scope 6 1
  33  0002              #line 33 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  33  0000              _SPI_cs_disable .section 'code'
  33  0000              _SPI_cs_disable proc
  34  0000              #line 34 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  34  0000  3052        	set [82].0
  34  0001  0003        	ret
  34  0002              _SPI_cs_disable endp
  34  0002              #line 34 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
  34  0002              #pragma debug scope 1 1
  34  0002              public _count
  34  0000              @HCCINIT	.section 'data'
   7  0000              #line 7 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
   7  0000              @HCCINIT .section 'data'
   7  0000              _count label byte
   7  0000              #pragma debug variable 8 1 _count "count"
   7  0000              	db 0
   7  0000              @ROMDATA_BASE .section inpage 'code'
   7  0000              	db 0
   7  0001              @HCCINIT .section 'data'
   6  0001              #line 6 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\spi.c"
   6  0001              public _res
   6  0000              @HCCINIT0 .section 'data'
   6  0000              _res	db 0
   6  0001              #pragma debug variable 8 1 _res "res"
   6  0001              
"File: spi.c         Assembler  Version HGASM0202      Page 4

   6  0001              @HCCINIT .section 'data'
   6  0001              #pragma debug struct_end
   6  0001              #pragma debug struct_end
   6  0001              #pragma debug union_end
   6  0001              #pragma debug union_end
   6  0001              #pragma debug variable 43 1 ___simc0 "__simc0" 1
   6  0001              #pragma debug variable 8 1 ___simd "__simd" 1
   6  0001              #pragma debug struct_end
   6  0001              #pragma debug struct_end
   6  0001              #pragma debug union_end
   6  0001              #pragma debug union_end
   6  0001              #pragma debug variable 45 1 ___simc2 "__simc2" 1
   6  0001              #pragma debug struct_end
   6  0001              #pragma debug struct_end
   6  0001              #pragma debug union_end
   6  0001              #pragma debug union_end
   6  0001              #pragma debug variable 47 1 ___pd "__pd" 1
   6  0001              #pragma debug struct_end
   6  0001              #pragma debug struct_end
   6  0001              #pragma debug union_end
   6  0001              #pragma debug union_end
   6  0001              #pragma debug variable 49 1 ___pdc "__pdc" 1
   6  0001              
   6  0001              ; 
   6  0001              ; Generated by holtek-gcc v3.14, Tue Jun 05 09:53:30 2018
   6  0001              ; Rebuild 10
   6  0001              ; end of file


        0 Errors, 0