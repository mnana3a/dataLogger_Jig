"File: sd_interface.c  Assembler  Version HGASM0202      Page 1


   1  0000              ; Generated by holtek-gcc v3.14, Tue Jun 05 09:53:26 2018
   2  0000              ; 
   3  0000              ; Configuration:
   4  0000              ;       without long instruction
   5  0000              ;       Single ROM, Multi-RAM
   6  0000              ;       bits_per_rom_unit:16
   7  0000              ;       with mp1
   8  0000              ;       with tbhp, address(0x9)
   9  0000              ;          Use tabrd-const
  10  0000              ;       
  11  0000              ;       
  12  0000              ;       
  13  0000              ; use 'tabrdc' instead of 'tabrd'
  14  0000              ;       
  15  0000              
  16  0000              #pragma translator "holtek-gcc 4.6.4" "3.14" "build 20130711"
  17  0000              ; Rebuild 10
  18  0000              
  19  0000              ir equ [2]
  20  0000              mp equ [3]
  21  0000              sbp equ [1]
  22  0000              acc equ [5]
  23  0000              bp equ [4]
  24  0000              tblp equ [7]
  25  0000              tbhp equ [9]
  26  0000              status equ [10]
  27  0000              c equ [10].0
  28  0000              ac equ [10].1
  29  0000              z equ [10].2
  30  0000              ov equ [10].3
  31  0000              intc equ [11]
  32  0000              
  33  0000              extern ra:byte
  34  0000              extern rb:byte
  35  0000              extern rc:byte
  36  0000              extern rd:byte
  37  0000              extern re:byte
  38  0000              extern rf:byte
  39  0000              extern rg:byte
  40  0000              extern rh:byte
  41  0000              extern _Crom2Prom:near
  42  0000              extern _Crom2PromNext:near
  43  0000              
  44  0000              RAMBANK 0 @HCCINIT, @HCCINIT0
  45  0000              
  46  0000              RAMBANK 0 @BITDATASEC, @BITDATASEC1
  47  0000              @HCCINIT	.section 'data'
  48  0000              @HCCINIT0	.section 'data'
  49  0000              @BITDATASEC	 .section 'data'
  50  0000              @BITDATASEC1	 .section 'data'
  51  0000              
  52  0000              #pragma debug scope 1 1
  53  0000              	extern __DELAY3:near
  54  0000              	extern __DELAYX3:near
  55  0000              	extern __DELAYX6:near
  56  0000              	extern __DELAYY5:near
  57  0000              	extern __DELAYY3:near
  58  0000              	extern _builtin_holtek_delay_2:byte
  59  0000              #pragma debug scope 2 1
"File: sd_interface.ASM  Assembler  Version HGASM0202      Page 2


  17  0000              #line 17 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  17  0000              _p_send_cmd .section 'code'
  17  0000              _p_send_cmd proc
  17  0000  0006[           local _p_send_cmd_2 db 6 dup(?)	; 4,2
            00
            ]
  17  0000  0080     R  	mov _p_send_cmd_2[4],a
  17  0001              #pragma debug variable 8 2 _p_send_cmd_2+4 "cmd"
  17  0001              #pragma debug variable 14 2 _p_send_cmd_2+0 "arg"
  17  0001              #pragma debug variable 8 2 _p_send_cmd_2+5 "crc"
  20  0001              #line 20 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  20  0001  2000     E  	call _SPI_cs_disable
  21  0002              #line 21 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  21  0002  0FFF        	mov a,255
  21  0003  2000     E  	call _SPI_transmit
  22  0004              #line 22 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  22  0004  0FFF        	mov a,255
  22  0005  2000     E  	call _SPI_transmit
  23  0006              #line 23 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  23  0006  2000     E  	call _SPI_cs_enable
  24  0007              #line 24 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  24  0007  0FFF        	mov a,255
  24  0008  2000     E  	call _SPI_transmit
  25  0009              #line 25 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  25  0009  0FFF        	mov a,255
  25  000A  2000     E  	call _SPI_transmit
  28  000B              #line 28 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  28  000B  0700     R  	mov a,_p_send_cmd_2[4]
  28  000C  0A40        	sub a,64
  28  000D  3D0A        	sz z
  28  000E  2800     R  	jmp _L7
  28  000F  0A08        	sub a,(72)-(64)
  28  0010  3D0A        	sz z
  28  0011  2800     R  	jmp _L8
  27  0012              #line 27 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  27  0012  0F01        	mov a,1
  27  0013  0080     R  	mov _p_send_cmd_2[5],a
  27  0014  2800     R  	jmp _L3
  27  0015              _L7:
  28  0015              #line 28 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  28  0015  0F95        	mov a,149
  28  0016  0080     R  	mov _p_send_cmd_2[5],a
  28  0017  2800     R  	jmp _L3
  28  0018              _L8:
  29  0018              #line 29 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  29  0018  0F87        	mov a,135
  29  0019  0080     R  	mov _p_send_cmd_2[5],a
  29  001A              _L3:
  32  001A              #line 32 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  32  001A  0700     R  	mov a,_p_send_cmd_2[4]
  32  001B  2000     E  	call _SPI_transmit
  33  001C              #line 33 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  33  001C  0700     R  	mov a,_p_send_cmd_2[0]
  33  001D  0080     E  	mov rd,a
  33  001E  0700     R  	mov a,_p_send_cmd_2[1]
  33  001F  0080     E  	mov re,a
  33  0020  0700     R  	mov a,_p_send_cmd_2[2]
  33  0021  0080     E  	mov rf,a
  33  0022  0700     R  	mov a,_p_send_cmd_2[3]
"File: sd_interface.c  Assembler  Version HGASM0202      Page 3

  33  0023  0080     E  	mov rg,a
  33  0024  0700     E  	mov a,rg
  33  0025  0080     E  	mov rd,a
  33  0026  1F00     E  	clr rg
  33  0027  1F00     E  	clr rf
  33  0028  1F00     E  	clr re
  33  0029  0700     E  	mov a,rd
  33  002A  2000     E  	call _SPI_transmit
  34  002B              #line 34 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  34  002B  0700     R  	mov a,_p_send_cmd_2[0]
  34  002C  0080     E  	mov rd,a
  34  002D  0700     R  	mov a,_p_send_cmd_2[1]
  34  002E  0080     E  	mov re,a
  34  002F  0700     R  	mov a,_p_send_cmd_2[2]
  34  0030  0080     E  	mov rf,a
  34  0031  0700     R  	mov a,_p_send_cmd_2[3]
  34  0032  0080     E  	mov rg,a
  34  0033  0700     E  	mov a,rf
  34  0034  0080     E  	mov rd,a
  34  0035  0700     E  	mov a,rg
  34  0036  0080     E  	mov re,a
  34  0037  1F00     E  	clr rg
  34  0038  1F00     E  	clr rf
  34  0039  0700     E  	mov a,rd
  34  003A  2000     E  	call _SPI_transmit
  35  003B              #line 35 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  35  003B  0700     R  	mov a,_p_send_cmd_2[0]
  35  003C  0080     E  	mov rd,a
  35  003D  0700     R  	mov a,_p_send_cmd_2[1]
  35  003E  0080     E  	mov re,a
  35  003F  0700     R  	mov a,_p_send_cmd_2[2]
  35  0040  0080     E  	mov rf,a
  35  0041  0700     R  	mov a,_p_send_cmd_2[3]
  35  0042  0080     E  	mov rg,a
  35  0043  0700     E  	mov a,re
  35  0044  0080     E  	mov rd,a
  35  0045  0700     E  	mov a,rf
  35  0046  0080     E  	mov re,a
  35  0047  0700     E  	mov a,rg
  35  0048  0080     E  	mov rf,a
  35  0049  1F00     E  	clr rg
  35  004A  0700     E  	mov a,rd
  35  004B  2000     E  	call _SPI_transmit
  36  004C              #line 36 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  36  004C  0700     R  	mov a,_p_send_cmd_2[0]
  36  004D  2000     E  	call _SPI_transmit
  37  004E              #line 37 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  37  004E  0700     R  	mov a,_p_send_cmd_2[5]
  37  004F  2000     E  	call _SPI_transmit
  37  0050  0F0A        	mov a,10
  37  0051  0080     R  	mov _p_send_cmd_2[5],a
  37  0052              _L6:
  42  0052              #line 42 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  42  0052  0FFF        	mov a,255
  42  0053  2000     E  	call _SPI_transmit
  42  0054  0080     E  	mov ra,a
  43  0055              #line 43 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  43  0055  3800     E  	snz ra.7
  43  0056  2800     R  	jmp _L10
  43  0057  1780     R  	sdz _p_send_cmd_2[5]
"File: sd_interface.c  Assembler  Version HGASM0202      Page 4

  43  0058  2800     R  	jmp _L6
  43  0059              _L10:
  46  0059              #line 46 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  46  0059  0700     E  	mov a,ra
  46  005A  0003        	ret
  46  005B              _p_send_cmd endp
  46  005B              #line 46 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  46  005B              #pragma debug scope 1 1
  46  005B              public _send_cmd
  46  005B              #pragma debug scope 3 1
  50  005B              #line 50 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  50  0000              _send_cmd .section 'code'
  50  0000              _send_cmd proc
  50  0000              public _send_cmd_2
  50  0000  0005[           local _send_cmd_2 db 5 dup(?)	; 4,1
            00
            ]
  50  0000  0080     E  	mov ra,a
  50  0001  0080     R  	mov _send_cmd_2[4],a
  50  0002              #pragma debug variable 8 3 _send_cmd_2+4 "cmd"
  50  0002              #pragma debug variable 14 3 _send_cmd_2+0 "arg"
  53  0002              #line 53 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  53  0002  0700     E  	mov a,ra
  53  0003  0A69        	sub a,105
  53  0004  3D0A        	sz z
  53  0005  2800     R  	jmp _L15
  53  0006              _L17:
  58  0006              #line 58 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  58  0006  0700     R  	mov a,_send_cmd_2[0]
  58  0007  0080     R  	mov _p_send_cmd_2[0],a
  58  0008  0700     R  	mov a,_send_cmd_2[1]
  58  0009  0080     R  	mov _p_send_cmd_2[1],a
  58  000A  0700     R  	mov a,_send_cmd_2[2]
  58  000B  0080     R  	mov _p_send_cmd_2[2],a
  58  000C  0700     R  	mov a,_send_cmd_2[3]
  58  000D  0080     R  	mov _p_send_cmd_2[3],a
  58  000E  0700     R  	mov a,_send_cmd_2[4]
  58  000F  2000     R  	call _p_send_cmd
  58  0010  0080     E  	mov ra,a
  60  0011              #line 60 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  60  0011  2800     R  	jmp _L16
  60  0012              _L15:
  54  0012              #line 54 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  54  0012  1F00     R  	clr _p_send_cmd_2[0]
  54  0013  1F00     R  	clr _p_send_cmd_2[1]
  54  0014  1F00     R  	clr _p_send_cmd_2[2]
  54  0015  1F00     R  	clr _p_send_cmd_2[3]
  54  0016  0F77        	mov a,119
  54  0017  2000     R  	call _p_send_cmd
  54  0018  0080     E  	mov ra,a
  55  0019              #line 55 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  55  0019  0F01        	mov a,1
  55  001A  0200     E  	sub a,ra
  55  001B  3C0A        	sz c
  55  001C  2800     R  	jmp _L17
  55  001D              _L16:
  61  001D              #line 61 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  61  001D  0700     E  	mov a,ra
  61  001E  0003        	ret
  61  001F              _send_cmd endp
"File: sd_interface.c  Assembler  Version HGASM0202      Page 5

  61  001F              #line 61 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  61  001F              #pragma debug scope 1 1
  61  001F              public _SD_init
  61  001F              #pragma debug scope 4 1
  65  001F              #line 65 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  65  0000              _SD_init .section 'code'
  65  0000              _SD_init proc
  65  0000  0009[           local _SD_init_2 db 9 dup(?)	; 0,9
            00
            ]
  65  0009              #pragma debug variable 8 4 _SD_init_2+8 "cmd"
  65  0009              #pragma debug variable 8 4 _SD_init_2+4 "ty"
  65  0009              #pragma debug array 42 8 4 4
  65  0009              #pragma debug array 42 8 4 4
  65  0009              #pragma debug variable 42 4 _SD_init_2+0 "ocr"
  73  0009              #line 73 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  73  0000  2000     E  	call _SPI_init
  74  0001              #line 74 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  74  0001  2000     E  	call _SPI_cs_disable
  74  0002  0F0A        	mov a,10
  74  0003  0080     R  	mov _SD_init_2[4],a
  74  0004              _L20:
  75  0004              #line 75 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  75  0004  0FFF        	mov a,255
  75  0005  2000     E  	call _SPI_transmit
  75  0006  1780     R  	sdz _SD_init_2[4]
  75  0007  2800     R  	jmp _L20
  78  0008              #line 78 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  78  0008  1F00     R  	clr _send_cmd_2[0]
  78  0009  1F00     R  	clr _send_cmd_2[1]
  78  000A  1F00     R  	clr _send_cmd_2[2]
  78  000B  1F00     R  	clr _send_cmd_2[3]
  78  000C  0F40        	mov a,64
  78  000D  2000     R  	call _send_cmd
  78  000E  0080     E  	mov ra,a
  78  000F  1700     E  	sdza ra
  78  0010  2800     R  	jmp _L41
  79  0011              #line 79 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  79  0011  0FAA        	mov a,-86
  79  0012  0080     R  	mov _send_cmd_2[0],a
  79  0013  0F01        	mov a,1
  79  0014  0080     R  	mov _send_cmd_2[1],a
  79  0015  1F00     R  	clr _send_cmd_2[2]
  79  0016  1F00     R  	clr _send_cmd_2[3]
  79  0017  0F48        	mov a,72
  79  0018  2000     R  	call _send_cmd
  79  0019  0080     E  	mov ra,a
  79  001A  1700     E  	sdza ra
  79  001B  2800     R  	jmp _L23
  79  001C  0F04        	mov a,4
  79  001D  0080     R  	mov _SD_init_2[4],a
  79  001E  1F00     R  	clr _SD_init_2[6]
  79  001F              _L25:
  80  001F              #line 80 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  80  001F  0FFF        	mov a,255
  80  0020  2000     E  	call _SPI_transmit
  80  0021  0080     E  	mov ra,a
  80  0022  0F00     R  	mov a,low offset _SD_init_2
  80  0023  0080     E  	mov rb,a
  80  0024  0F00     R  	mov a,high offset _SD_init_2
"File: sd_interface.c  Assembler  Version HGASM0202      Page 6

  80  0025  0080     E  	mov rc,a
  80  0026  0700     R  	mov a,_SD_init_2[6]
  80  0027  0300     E  	add a,rb
  80  0028  0083        	mov mp,a
  80  0029  1F05        	clr acc
  80  002A  1300     E  	adc a,rc
  80  002B  0081        	mov sbp,a
  80  002C  0701        	mov a,sbp
  80  002D  0084        	mov bp,a
  80  002E  0700     E  	mov a,ra
  80  002F  0082        	mov ir,a
  80  0030  1480     R  	inc _SD_init_2[6]
  80  0031  1780     R  	sdz _SD_init_2[4]
  80  0032  2800     R  	jmp _L25
  81  0033              #line 81 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  81  0033  1700     R  	sdza _SD_init_2[2]
  81  0034  2800     R  	jmp _L41
  81  0035  0700     R  	mov a,_SD_init_2[3]
  81  0036  0AAA        	sub a,170
  81  0037  390A        	snz z
  81  0038  2800     R  	jmp _L41
  81  0039  0F10        	mov a,16
  81  003A  0080     R  	mov _SD_init_2[4],a
  81  003B  0F27        	mov a,39
  81  003C  0080     R  	mov _SD_init_2[5],a
  81  003D              _L27:
  82  003D              #line 82 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  82  003D  1F00     R  	clr _send_cmd_2[0]
  82  003E  1F00     R  	clr _send_cmd_2[1]
  82  003F  1F00     R  	clr _send_cmd_2[2]
  82  0040  0F40        	mov a,64
  82  0041  0080     R  	mov _send_cmd_2[3],a
  82  0042  0F69        	mov a,105
  82  0043  2000     R  	call _send_cmd
  82  0044  0080     E  	mov ra,a
  82  0045  1080     E  	sz ra
  82  0046  2800     R  	jmp _LI1
  82  0047  2800     R  	jmp _L54
  82  0048              _LI1:
  82  0048  2000     E  	call _delay_100us
  82  0049  0FFF        	mov a,255
  82  004A  0380     R  	addm a,_SD_init_2[4]
  82  004B  0FFF        	mov a,255
  82  004C  1380     R  	adcm a,_SD_init_2[5]
  82  004D  0700     R  	mov a,_SD_init_2[4]
  82  004E  0500     R  	or a,_SD_init_2[5]
  82  004F  390A        	snz z
  82  0050  2800     R  	jmp _L27
  82  0051  2800     R  	jmp _L41
  82  0052              _L23:
  89  0052              #line 89 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  89  0052  1F00     R  	clr _send_cmd_2[0]
  89  0053  1F00     R  	clr _send_cmd_2[1]
  89  0054  1F00     R  	clr _send_cmd_2[2]
  89  0055  1F00     R  	clr _send_cmd_2[3]
  89  0056  0F69        	mov a,105
  89  0057  2000     R  	call _send_cmd
  89  0058  0080     E  	mov ra,a
  89  0059  0F01        	mov a,1
  89  005A  0200     E  	sub a,ra
"File: sd_interface.c  Assembler  Version HGASM0202      Page 7

  89  005B  380A        	snz c
  89  005C  2800     R  	jmp _L39
  90  005D              #line 90 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  90  005D  0F02        	mov a,2
  90  005E  0080     R  	mov _SD_init_2[4],a
  90  005F  0F69        	mov a,105
  90  0060  0080     R  	mov _SD_init_2[8],a
  90  0061  2800     R  	jmp _L31
  90  0062              _L39:
  92  0062              #line 92 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  92  0062  0F01        	mov a,1
  92  0063  0080     R  	mov _SD_init_2[4],a
  92  0064  0F41        	mov a,65
  92  0065  0080     R  	mov _SD_init_2[8],a
  92  0066              _L31:
  92  0066  0F10        	mov a,16
  92  0067  0080     R  	mov _SD_init_2[6],a
  92  0068  0F27        	mov a,39
  92  0069  0080     R  	mov _SD_init_2[7],a
  92  006A              _L32:
  94  006A              #line 94 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  94  006A  1F00     R  	clr _send_cmd_2[0]
  94  006B  1F00     R  	clr _send_cmd_2[1]
  94  006C  1F00     R  	clr _send_cmd_2[2]
  94  006D  1F00     R  	clr _send_cmd_2[3]
  94  006E  0700     R  	mov a,_SD_init_2[8]
  94  006F  2000     R  	call _send_cmd
  94  0070  0080     E  	mov ra,a
  94  0071  1080     E  	sz ra
  94  0072  2800     R  	jmp _LI2
  94  0073  2800     R  	jmp _L55
  94  0074              _LI2:
  94  0074  2000     E  	call _delay_100us
  94  0075  0FFF        	mov a,255
  94  0076  0380     R  	addm a,_SD_init_2[6]
  94  0077  0FFF        	mov a,255
  94  0078  1380     R  	adcm a,_SD_init_2[7]
  94  0079  0700     R  	mov a,_SD_init_2[6]
  94  007A  0500     R  	or a,_SD_init_2[7]
  94  007B  390A        	snz z
  94  007C  2800     R  	jmp _L32
  94  007D  2800     R  	jmp _L41
  94  007E              _L55:
  95  007E              #line 95 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  95  007E  1F00     R  	clr _send_cmd_2[0]
  95  007F  0F02        	mov a,2
  95  0080  0080     R  	mov _send_cmd_2[1],a
  95  0081  1F00     R  	clr _send_cmd_2[2]
  95  0082  1F00     R  	clr _send_cmd_2[3]
  95  0083  0F50        	mov a,80
  95  0084  2000     R  	call _send_cmd
  95  0085  0080     E  	mov ra,a
  95  0086  1080     E  	sz ra
  95  0087  2800     R  	jmp _LI3
  95  0088  2800     R  	jmp _L22
  95  0089              _LI3:
  95  0089              _L41:
  96  0089              #line 96 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  96  0089  1F00     R  	clr _SD_init_2[4]
  96  008A              _L22:
"File: sd_interface.c  Assembler  Version HGASM0202      Page 8

  99  008A              #line 99 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  99  008A  0700     R  	mov a,_SD_init_2[4]
  99  008B  0080     R  	mov _CardType[0],a
 100  008C              #line 100 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 100  008C  2000     E  	call _SPI_cs_disable
 101  008D              #line 101 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 101  008D  0FFF        	mov a,255
 101  008E  2000     E  	call _SPI_transmit
 103  008F              #line 103 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 103  008F  0F05        	mov a,5
 103  0090  0080     R  	mov _send_cmd_2[0],a
 103  0091  1F00     R  	clr _send_cmd_2[1]
 103  0092  1F00     R  	clr _send_cmd_2[2]
 103  0093  1F00     R  	clr _send_cmd_2[3]
 103  0094  0F50        	mov a,80
 103  0095  2000     R  	call _send_cmd
 103  0096  0080     E  	mov ra,a
 103  0097  1080     E  	sz ra
 103  0098  2800     R  	jmp _L40
 106  0099              #line 106 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 106  0099  0F01        	mov a,1
 106  009A  0080     E  	mov ra,a
 106  009B  1080     R  	sz _SD_init_2[4]
 106  009C  2800     R  	jmp _LI4
 106  009D  2800     R  	jmp _L45
 106  009E              _LI4:
 106  009E  1F00     E  	clr ra
 106  009F  2800     R  	jmp _L45
 106  00A0              _L40:
 103  00A0              #line 103 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 103  00A0  1F80     E  	set ra
 103  00A1  2800     R  	jmp _L45
 103  00A2              _L54:
  83  00A2              #line 83 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  83  00A2  1F00     R  	clr _send_cmd_2[0]
  83  00A3  1F00     R  	clr _send_cmd_2[1]
  83  00A4  1F00     R  	clr _send_cmd_2[2]
  83  00A5  1F00     R  	clr _send_cmd_2[3]
  83  00A6  0F7A        	mov a,122
  83  00A7  2000     R  	call _send_cmd
  83  00A8  0080     E  	mov ra,a
  83  00A9  1080     E  	sz ra
  83  00AA  2800     R  	jmp _L41
  83  00AB  0F04        	mov a,4
  83  00AC  0080     R  	mov _SD_init_2[4],a
  83  00AD  1F00     R  	clr _SD_init_2[6]
  83  00AE              _L37:
  84  00AE              #line 84 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  84  00AE  0FFF        	mov a,255
  84  00AF  2000     E  	call _SPI_transmit
  84  00B0  0080     E  	mov ra,a
  84  00B1  0F00     R  	mov a,low offset _SD_init_2
  84  00B2  0080     E  	mov rb,a
  84  00B3  0F00     R  	mov a,high offset _SD_init_2
  84  00B4  0080     E  	mov rc,a
  84  00B5  0700     R  	mov a,_SD_init_2[6]
  84  00B6  0300     E  	add a,rb
  84  00B7  0083        	mov mp,a
  84  00B8  1F05        	clr acc
  84  00B9  1300     E  	adc a,rc
"File: sd_interface.c  Assembler  Version HGASM0202      Page 9

  84  00BA  0081        	mov sbp,a
  84  00BB  0701        	mov a,sbp
  84  00BC  0084        	mov bp,a
  84  00BD  0700     E  	mov a,ra
  84  00BE  0082        	mov ir,a
  84  00BF  1480     R  	inc _SD_init_2[6]
  84  00C0  1780     R  	sdz _SD_init_2[4]
  84  00C1  2800     R  	jmp _L37
  85  00C2              #line 85 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
  85  00C2  3800     R  	snz _SD_init_2[0].6
  85  00C3  2800     R  	jmp _L38
  85  00C4  0F0C        	mov a,12
  85  00C5  0080     R  	mov _SD_init_2[4],a
  85  00C6  2800     R  	jmp _L22
  85  00C7              _L38:
  85  00C7  0F04        	mov a,4
  85  00C8  0080     R  	mov _SD_init_2[4],a
  85  00C9  2800     R  	jmp _L22
  85  00CA              _L45:
 107  00CA              #line 107 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 107  00CA  0700     E  	mov a,ra
 107  00CB  0003        	ret
 107  00CC              _SD_init endp
 107  00CC              #line 107 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 107  00CC              #pragma debug scope 1 1
 107  00CC              public _SD_seek
 107  00CC              #pragma debug scope 5 1
 111  00CC              #line 111 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 111  0000              _SD_seek .section 'code'
 111  0000              _SD_seek proc
 111  0000              public _SD_seek_2
 111  0000  0004[           local _SD_seek_2 db 4 dup(?)	; 4,0
            00
            ]
 111  0004              #pragma debug variable 14 5 _SD_seek_2+0 "offset"
 114  0004              #line 114 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 114  0000  0700     R  	mov a,_SD_seek_2[0]
 114  0001  0080     E  	mov rd,a
 114  0002  0700     R  	mov a,_SD_seek_2[1]
 114  0003  0080     E  	mov re,a
 114  0004  0700     R  	mov a,_SD_seek_2[2]
 114  0005  0080     E  	mov rf,a
 114  0006  0700     R  	mov a,_SD_seek_2[3]
 114  0007  0080     E  	mov rg,a
 114  0008  0F09        	mov a,9
 114  0009              _LI5:
 114  0009  340A        	clr c
 114  000A  1B80     E  	rrc rg
 114  000B  1B80     E  	rrc rf
 114  000C  1B80     E  	rrc re
 114  000D  1B80     E  	rrc rd
 114  000E  1785        	sdz acc
 114  000F  2800     R  	jmp _LI5
 114  0010  0700     E  	mov a,rd
 114  0011  0080     R  	mov _sect_num[0],a
 114  0012  0700     E  	mov a,re
 114  0013  0080     R  	mov _sect_num[1],a
 114  0014  0700     E  	mov a,rf
 114  0015  0080     R  	mov _sect_num[2],a
 114  0016  0700     E  	mov a,rg
"File: sd_interface.c  Assembler  Version HGASM0202      Page 10

 114  0017  0080     R  	mov _sect_num[3],a
 115  0018              #line 115 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 115  0018  340A        	clr c
 115  0019  1A00     E  	rlca rd
 115  001A  0080     E  	mov re,a
 115  001B  1F00     E  	clr rd
 115  001C  0700     R  	mov a,_SD_seek_2[0]
 115  001D  0200     E  	sub a,rd
 115  001E  0080     E  	mov ra,a
 115  001F  0700     R  	mov a,_SD_seek_2[1]
 115  0020  1200     E  	sbc a,re
 115  0021  0080     E  	mov rb,a
 115  0022  0700     E  	mov a,ra
 115  0023  0080     R  	mov _byte_offset[0],a
 115  0024  0700     E  	mov a,rb
 115  0025  0080     R  	mov _byte_offset[1],a
 115  0026  0003        	ret
 115  0027              _SD_seek endp
 115  0027              #line 115 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 115  0027              #pragma debug scope 1 1
 115  0027              public _SD_get
 115  0027              #pragma debug scope 6 1
 130  0027              #line 130 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 130  0000              _SD_get .section 'code'
 130  0000              _SD_get proc
 130  0000              public _SD_get_2
 130  0000  0007[           local _SD_get_2 db 7 dup(?)	; 3,4
            00
            ]
 130  0007              #pragma debug pointer 43 8 6
 130  0007              #pragma debug pointer 43 8 6
 130  0007              #pragma debug variable 43 6 _SD_get_2+0 "buff"
 130  0007              #pragma debug variable 8 6 _SD_get_2+2 "byte_count"
 130  0007              #pragma debug variable 8 6 _SD_get_2+5 "rc"
 130  0007              #pragma debug variable 8 6 _SD_get_2+3 "i"
 135  0007              #line 135 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 135  0000  3C00     R  	sz _CardType[0].3
 135  0001  2800     R  	jmp _L58
 135  0002              #line 135 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 135  0002  0F09        	mov a,9
 135  0003              _LI6:
 135  0003  340A        	clr c
 135  0004  1A80     R  	rlc _sect_num[0]
 135  0005  1A80     R  	rlc _sect_num[1]
 135  0006  1A80     R  	rlc _sect_num[2]
 135  0007  1A80     R  	rlc _sect_num[3]
 135  0008  1785        	sdz acc
 135  0009  2800     R  	jmp _LI6
 135  000A              _L58:
 130  000A              #line 130 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 130  000A  0FE8        	mov a,-24
 130  000B  0080     R  	mov _SD_get_2[3],a
 130  000C  0F03        	mov a,3
 130  000D  0080     R  	mov _SD_get_2[4],a
 130  000E              _L59:
 141  000E              #line 141 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 141  000E  0700     R  	mov a,_sect_num[0]
 141  000F  0080     R  	mov _send_cmd_2[0],a
 141  0010  0700     R  	mov a,_sect_num[1]
 141  0011  0080     R  	mov _send_cmd_2[1],a
"File: sd_interface.c  Assembler  Version HGASM0202      Page 11

 141  0012  0700     R  	mov a,_sect_num[2]
 141  0013  0080     R  	mov _send_cmd_2[2],a
 141  0014  0700     R  	mov a,_sect_num[3]
 141  0015  0080     R  	mov _send_cmd_2[3],a
 141  0016  0F51        	mov a,81
 141  0017  2000     R  	call _send_cmd
 141  0018  0080     E  	mov ra,a
 141  0019  1080     E  	sz ra
 141  001A  2800     R  	jmp _LI7
 141  001B  2800     R  	jmp _L83
 141  001C              _LI7:
 141  001C  2000     E  	call _delay_100us
 141  001D  0FFF        	mov a,255
 141  001E  0380     R  	addm a,_SD_get_2[3]
 141  001F  0FFF        	mov a,255
 141  0020  1380     R  	adcm a,_SD_get_2[4]
 141  0021  0700     R  	mov a,_SD_get_2[3]
 141  0022  0500     R  	or a,_SD_get_2[4]
 141  0023  390A        	snz z
 141  0024  2800     R  	jmp _L59
 142  0025              #line 142 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 142  0025  1F80     E  	set ra
 142  0026  2800     R  	jmp _L60
 142  0027              _L83:
 141  0027              #line 141 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 141  0027  0F40        	mov a,64
 141  0028  0080     R  	mov _SD_get_2[3],a
 141  0029  0F9C        	mov a,-100
 141  002A  0080     R  	mov _SD_get_2[4],a
 141  002B              _L64:
 149  002B              #line 149 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 149  002B  0FFF        	mov a,255
 149  002C  2000     E  	call _SPI_transmit
 149  002D  0080     R  	mov _SD_get_2[5],a
 150  002E              #line 150 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 150  002E  1600     R  	siza _SD_get_2[5]
 150  002F  2800     R  	jmp _L62
 150  0030  0FFF        	mov a,255
 150  0031  0380     R  	addm a,_SD_get_2[3]
 150  0032  0FFF        	mov a,255
 150  0033  1380     R  	adcm a,_SD_get_2[4]
 150  0034  0700     R  	mov a,_SD_get_2[3]
 150  0035  0500     R  	or a,_SD_get_2[4]
 150  0036  390A        	snz z
 150  0037  2800     R  	jmp _L64
 150  0038  2800     R  	jmp _L63
 150  0039              _L62:
 152  0039              #line 152 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 152  0039  0700     R  	mov a,_SD_get_2[5]
 152  003A  0AFE        	sub a,254
 152  003B  390A        	snz z
 152  003C  2800     R  	jmp _L63
 155  003D              #line 155 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 155  003D  0700     R  	mov a,_byte_offset[0]
 155  003E  0500     R  	or a,_byte_offset[1]
 155  003F  390A        	snz z
 155  0040  2800     R  	jmp _L69
 155  0041              _L68:
 159  0041              #line 159 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 159  0041  0700     R  	mov a,_SD_get_2[0]
"File: sd_interface.c  Assembler  Version HGASM0202      Page 12

 159  0042  0500     R  	or a,_SD_get_2[1]
 159  0043  3D0A        	sz z
 159  0044  2800     R  	jmp _L73
 159  0045  1F00     R  	clr _SD_get_2[3]
 159  0046  2800     R  	jmp _L71
 159  0047              _L69:
 156  0047              #line 156 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 156  0047  0FFF        	mov a,255
 156  0048  2000     E  	call _SPI_transmit
 156  0049  0FFF        	mov a,255
 156  004A  0300     R  	add a,_byte_offset[0]
 156  004B  0080     E  	mov rb,a
 156  004C  0FFF        	mov a,255
 156  004D  1300     R  	adc a,_byte_offset[1]
 156  004E  0080     E  	mov rc,a
 156  004F  0700     E  	mov a,rb
 156  0050  0080     R  	mov _byte_offset[0],a
 156  0051  0700     E  	mov a,rc
 156  0052  0080     R  	mov _byte_offset[1],a
 156  0053  0700     E  	mov a,rb
 156  0054  0500     E  	or a,rc
 156  0055  390A        	snz z
 156  0056  2800     R  	jmp _L69
 156  0057  2800     R  	jmp _L68
 156  0058              _L71:
 161  0058              #line 161 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 161  0058  0700     R  	mov a,_SD_get_2[3]
 161  0059  0300     R  	add a,_SD_get_2[0]
 161  005A  0080     R  	mov _SD_get_2[5],a
 161  005B  1F05        	clr acc
 161  005C  1300     R  	adc a,_SD_get_2[1]
 161  005D  0080     R  	mov _SD_get_2[6],a
 161  005E  0FFF        	mov a,255
 161  005F  2000     E  	call _SPI_transmit
 161  0060  0080     E  	mov ra,a
 161  0061  0700     R  	mov a,_SD_get_2[5]
 161  0062  0083        	mov mp,a
 161  0063  0700     R  	mov a,_SD_get_2[6]
 161  0064  0081        	mov sbp,a
 161  0065  0701        	mov a,sbp
 161  0066  0084        	mov bp,a
 161  0067  0700     E  	mov a,ra
 161  0068  0082        	mov ir,a
 162  0069              #line 162 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 162  0069  1480     R  	inc _SD_get_2[3]
 163  006A              #line 163 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 163  006A  0700     R  	mov a,_SD_get_2[2]
 163  006B  0200     R  	sub a,_SD_get_2[3]
 163  006C  390A        	snz z
 163  006D  2800     R  	jmp _L71
 163  006E              _L74:
 173  006E              #line 173 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 173  006E  0FFF        	mov a,255
 173  006F  2000     E  	call _SPI_transmit
 174  0070              #line 174 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 174  0070  0FFF        	mov a,255
 174  0071  2000     E  	call _SPI_transmit
 174  0072  2800     R  	jmp _L63
 174  0073              _L84:
 168  0073              #line 168 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
"File: sd_interface.c  Assembler  Version HGASM0202      Page 13

 168  0073  0FFF        	mov a,255
 168  0074  2000     E  	call _SPI_transmit
 168  0075  0080     E  	mov ra,a
 168  0076  0700     E  	mov a,ra
 168  0077  00D9        	mov [89],a
 169  0078              #line 169 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 169  0078  1780     R  	sdz _SD_get_2[2]
 169  0079  2800     R  	jmp _LI8
 169  007A  2800     R  	jmp _L74
 169  007B              _LI8:
 169  007B              _L73:
 168  007B              #line 168 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 168  007B  3855        	snz [85].0
 168  007C  2800     R  	jmp _L73
 168  007D  2800     R  	jmp _L84
 168  007E              _L63:
 181  007E              #line 181 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 181  007E  2000     E  	call _SPI_cs_disable
 182  007F              #line 182 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 182  007F  0FFF        	mov a,255
 182  0080  2000     E  	call _SPI_transmit
 184  0081              #line 184 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 184  0081  1F00     E  	clr ra
 184  0082              _L60:
 185  0082              #line 185 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 185  0082  0700     E  	mov a,ra
 185  0083  0003        	ret
 185  0084              _SD_get endp
 185  0084              #line 185 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\sd_interface.c"
 185  0084              #pragma debug scope 1 1
 185  0000              @HCCINIT0	.section	'data'
 185  0000  0002[       _byte_offset	db 2 dup(0)
            00
            ]
 185  0002              #pragma debug variable 12 1 _byte_offset "byte_offset"
 185  0002              
 185  0000              @HCCINIT .section 'data'
 185  0002              @HCCINIT0	.section	'data'
 185  0002  0004[       _sect_num	db 4 dup(0)
            00
            ]
 185  0006              #pragma debug variable 14 1 _sect_num "sect_num"
 185  0006              
 185  0000              @HCCINIT .section 'data'
 185  0006              @HCCINIT0	.section	'data'
 185  0006              _CardType	db 0
 185  0007              #pragma debug variable 8 1 _CardType "CardType"
 185  0007              
 185  0000              @HCCINIT .section 'data'
 185  0000              extern _SPI_cs_disable:near
 185  0000              extern _SPI_transmit:near
 185  0000              extern _SPI_cs_enable:near
 185  0000              extern _SPI_init:near
 185  0000              extern _delay_100us:near
 185  0000              
 185  0000              ; 
 185  0000              ; Generated by holtek-gcc v3.14, Tue Jun 05 09:53:26 2018
 185  0000              ; Rebuild 10
 185  0000              ; end of file

"File: sd_interface.c  Assembler  Version HGASM0202      Page 14


        0 Errors, 0