"File: uart.c        Assembler  Version HGASM0202      Page 1


   1  0000              ; Generated by holtek-gcc v3.14, Tue Jun 05 09:53:27 2018
   2  0000              ; 
   3  0000              ; Configuration:
   4  0000              ;       without long instruction
   5  0000              ;       Single ROM, Multi-RAM
   6  0000              ;       bits_per_rom_unit:16
   7  0000              ;       with mp1
   8  0000              ;       with tbhp, address(0x9)
   9  0000              ;          Use tabrd-const
  10  0000              ;       
  11  0000              ;       
  12  0000              ;       
  13  0000              ; use 'tabrdc' instead of 'tabrd'
  14  0000              ;       
  15  0000              
  16  0000              #pragma translator "holtek-gcc 4.6.4" "3.14" "build 20130711"
  17  0000              ; Rebuild 10
  18  0000              
  19  0000              ir equ [2]
  20  0000              mp equ [3]
  21  0000              sbp equ [1]
  22  0000              acc equ [5]
  23  0000              bp equ [4]
  24  0000              tblp equ [7]
  25  0000              tbhp equ [9]
  26  0000              status equ [10]
  27  0000              c equ [10].0
  28  0000              ac equ [10].1
  29  0000              z equ [10].2
  30  0000              ov equ [10].3
  31  0000              intc equ [11]
  32  0000              
  33  0000              extern ra:byte
  34  0000              extern rb:byte
  35  0000              extern rc:byte
  36  0000              extern rd:byte
  37  0000              extern re:byte
  38  0000              extern rf:byte
  39  0000              extern rg:byte
  40  0000              extern rh:byte
  41  0000              extern _Crom2Prom:near
  42  0000              extern _Crom2PromNext:near
  43  0000              
  44  0000              RAMBANK 0 @HCCINIT, @HCCINIT0
  45  0000              
  46  0000              RAMBANK 0 @BITDATASEC, @BITDATASEC1
  47  0000              @HCCINIT	.section 'data'
  48  0000              @HCCINIT0	.section 'data'
  49  0000              @BITDATASEC	 .section 'data'
  50  0000              @BITDATASEC1	 .section 'data'
  51  0000              
  52  0000              #pragma debug scope 1 1
  53  0000              	extern __DELAY3:near
  54  0000              	extern __DELAYX3:near
  55  0000              	extern __DELAYX6:near
  56  0000              	extern __DELAYY5:near
  57  0000              	extern __DELAYY3:near
  58  0000              	extern _builtin_holtek_delay_2:byte
  59  0000              ___intc2 equ [16]
"File: uart.ASM      Assembler  Version HGASM0202      Page 2

  60  0000              ___intc0 equ [14]
  61  0000              public _UART_init
  62  0000              #pragma debug scope 2 1

  24  0000              #line 24 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  24  0000              _UART_init .section 'code'
  24  0000              _UART_init proc
  26  0000              #line 26 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  26  0000  3190        	set [16].3
  26  0001  33D6        	set [86].7
  26  0002  0F0C        	mov a,12
  26  0003  00D8        	mov [88],a
  26  0004  0FC4        	mov a,196
  26  0005  05D7        	orm a,[87]
  26  0006  300E        	set [14].0
  28  0007              #line 28 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  28  0007  1F00     R  	clr _gu8Main_buf[0]
  28  0008  1F00     R  	clr _gu8Main_buf[1]
  28  0009  1F00     R  	clr _gu8Main_buf[2]
  28  000A  1F00     R  	clr _gu8Main_buf[3]
  28  000B  1F00     R  	clr _gu8Main_buf[4]
  29  000C              #line 29 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  29  000C  1F00     R  	clr _gu8Buf_idx[0]
  30  000D              #line 30 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  30  000D  1F00     R  	clr _gu8Buffer_ready[0]
  31  000E              #line 31 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  31  000E  1F00     R  	clr _uart_signal[0]
  31  000F  0003        	ret
  31  0010              _UART_init endp
  31  0010              #line 31 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  31  0010              #pragma debug scope 1 1
  31  0010              public _UART_update
  31  0010              #pragma debug scope 3 1
  35  0010              #line 35 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  35  0000              _UART_update .section 'code'
  35  0000              _UART_update proc
  35  0000  0003        	ret
  35  0001              _UART_update endp
  35  0001              #line 35 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  35  0001              #pragma debug scope 1 1
  35  0001              public _UART_getSignal
  35  0001              #pragma debug scope 4 1
  40  0001              #line 40 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  40  0000              _UART_getSignal .section 'code'
  40  0000              _UART_getSignal proc
  41  0000              #line 41 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  41  0000  0700     R  	mov a,_uart_signal[0]
  41  0001  0080     E  	mov ra,a
  42  0002              #line 42 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  42  0002  0700     E  	mov a,ra
  42  0003  0003        	ret
  42  0004              _UART_getSignal endp
  42  0004              #line 42 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  42  0004              #pragma debug scope 1 1
  42  0004              public _UART_setSignal
  42  0004              #pragma debug scope 5 1
  45  0004              #line 45 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  45  0000              _UART_setSignal .section 'code'
  45  0000              _UART_setSignal proc
  45  0000  00              local _UART_setSignal_2 db 1 dup(?)	; 0,1
"File: uart.c        Assembler  Version HGASM0202      Page 3

  45  0000  0080     E  	mov ra,a
  45  0001              #pragma debug variable 8 5 _UART_setSignal_2+0 "signal"
  46  0001              #line 46 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  46  0001  0700     E  	mov a,ra
  46  0002  0080     R  	mov _uart_signal[0],a
  46  0003  0003        	ret
  46  0004              _UART_setSignal endp
  46  0004              #line 46 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  46  0004              #pragma debug scope 1 1
  46  0004              public _ISR_uart
  46  0004              #pragma debug scope 6 1
  53  0004              #line 53 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  53  0000              @ISR_uart_code .section at 44 'code'
  53  0000  0080     E  	mov r1,a
  53  0001  0704        	mov a,bp
  53  0002  0080     E  	mov r2,a
  53  0003  2800     R  	jmp _ISR_uart
  53  0004              #pragma debug scope 1 1
  53  0004              @dummy44 endp
  53  0004              #pragma debug scope 7 1
  53  0000              _ISR_uart .section 'code'
  53  0000              _ISR_uart proc
  53  0000  00          local _ISR_uart_2 db 1 dup(?)
  53  0000  070A        	mov a,status
  53  0001  0080     E  	mov r3,a
  53  0002  0703        	mov a,mp
  53  0003  0080     E  	mov r4,a
  53  0004  0701        	mov a,sbp
  53  0005  0080     E  	mov r5,a
  53  0006              #pragma debug variable 7 7 _ISR_uart_2+0 "data"
  56  0006              #line 56 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  56  0006  0759        	mov a,[89]
  56  0007  0080     R  	mov _ISR_uart_2[0],a
  57  0008              #line 57 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  57  0008  1080     R  	sz _gu8Buffer_ready[0]
  57  0009  2800     R  	jmp _L5
  59  000A              #line 59 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  59  000A  0700     R  	mov a,_gu8Buf_idx[0]
  59  000B  0080     E  	mov ra,a
  59  000C  1400     E  	inca ra
  59  000D  0080     R  	mov _gu8Buf_idx[0],a
  59  000E  0F00     R  	mov a,low offset _gu8Main_buf
  59  000F  0300     E  	add a,ra
  59  0010  0083        	mov mp,a
  59  0011  0F00     R  	mov a,high offset _gu8Main_buf
  59  0012  1F01        	clr sbp
  59  0013  1381        	adcm a,sbp
  59  0014  0701        	mov a,sbp
  59  0015  0084        	mov bp,a
  59  0016  0700     R  	mov a,_ISR_uart_2[0]
  59  0017  0082        	mov ir,a
  60  0018              #line 60 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  60  0018  0700     R  	mov a,_ISR_uart_2[0]
  60  0019  0A0A        	sub a,10
  60  001A  3D0A        	sz z
  60  001B  2800     R  	jmp _L8
  60  001C  0A03        	sub a,(13)-(10)
  60  001D  3D0A        	sz z
  60  001E  2800     R  	jmp _L8
  60  001F  0700     R  	mov a,_ISR_uart_2[0]
"File: uart.c        Assembler  Version HGASM0202      Page 4

  60  0020  0080     E  	mov ra,a
  60  0021  0700     R  	mov a,_ISR_uart_2[0]
  60  0022  0080     E  	mov ra,a
  60  0023  0F03        	mov a,3
  60  0024  0200     R  	sub a,_gu8Buf_idx[0]
  60  0025  3C0A        	sz c
  60  0026  2800     R  	jmp _L5
  60  0027              _L8:
  62  0027              #line 62 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  62  0027  0F00     R  	mov a,low (offset _gu8Main_buf-1)
  62  0028  0300     R  	add a,_gu8Buf_idx[0]
  62  0029  0083        	mov mp,a
  62  002A  0F00     R  	mov a,high (offset _gu8Main_buf-1)
  62  002B  1F01        	clr sbp
  62  002C  1381        	adcm a,sbp
  62  002D  0701        	mov a,sbp
  62  002E  0084        	mov bp,a
  62  002F  0F00        	mov a,0
  62  0030  0082        	mov ir,a
  63  0031              #line 63 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  63  0031  1F00     R  	clr _gu8Buf_idx[0]
  64  0032              #line 64 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  64  0032  0F01        	mov a,1
  64  0033  0080     R  	mov _gu8Buffer_ready[0],a
  64  0034              _L5:
  64  0034  0700     E  	mov a,r2
  64  0035  0084        	mov bp,a
  64  0036  0700     E  	mov a,r3
  64  0037  008A        	mov status,a
  64  0038  0700     E  	mov a,r4
  64  0039  0083        	mov mp,a
  64  003A  0700     E  	mov a,r5
  64  003B  0081        	mov sbp,a
  64  003C  0700     E  	mov a,r1
  64  003D  0004        	reti
  64  003E              _ISR_uart endp
  64  003E              
  64  003E              #line 64 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  64  003E              #pragma debug scope 1 1
  64  0000              @HCCINIT0	.section	'data'
  64  0000              _uart_signal	db 0
  64  0001              #pragma debug variable 8 1 _uart_signal "uart_signal"
  64  0001              
  64  0000              @HCCINIT .section 'data'
  64  0000              public _gu8Buffer_ready
  64  0000              @HCCINIT	.section 'data'
  20  0000              #line 20 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  20  0000              @HCCINIT .section 'data'
  20  0000              _gu8Buffer_ready label byte
  20  0000              #pragma debug variable 8 1 _gu8Buffer_ready "gu8Buffer_ready"
  20  0000              	db 0
  20  0000              @ROMDATA_BASE .section inpage 'code'
  20  0000              	db 0
  20  0001              @HCCINIT .section 'data'
  20  0001              public _gu8Main_buf
  19  0001              #line 19 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  19  0001              @HCCINIT .section 'data'
  19  0001              _gu8Main_buf label byte
  19  0001              #pragma debug array 42 8 5 1
  19  0001              #pragma debug array 42 8 5 1
"File: uart.c        Assembler  Version HGASM0202      Page 5

  19  0001              #pragma debug variable 42 1 _gu8Main_buf "gu8Main_buf"
  19  0001              	db 0
  19  0001              @ROMDATA_BASE .section inpage 'code'
  19  0001              	db 0
  19  0002              @HCCINIT .section 'data'
  19  0002              	db 0
  19  0001              @ROMDATA_BASE .section inpage 'code'
  19  0001              	db 0
  19  0003              @HCCINIT .section 'data'
  19  0003              	db 0
  19  0002              @ROMDATA_BASE .section inpage 'code'
  19  0002              	db 0
  19  0004              @HCCINIT .section 'data'
  19  0004              	db 0
  19  0002              @ROMDATA_BASE .section inpage 'code'
  19  0002              	db 0
  19  0005              @HCCINIT .section 'data'
  19  0005              	db 0
  19  0003              @ROMDATA_BASE .section inpage 'code'
  19  0003              	db 0
  19  0006              @HCCINIT .section 'data'
  19  0006              public _gu8Buf_idx
  18  0006              #line 18 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd_READ\uart.c"
  18  0006              @HCCINIT .section 'data'
  18  0006              _gu8Buf_idx label byte
  18  0006              #pragma debug variable 8 1 _gu8Buf_idx "gu8Buf_idx"
  18  0006              	db 0
  18  0003              @ROMDATA_BASE .section inpage 'code'
  18  0003              	db 0
  18  0007              @HCCINIT .section 'data'
  18  0007              #pragma debug struct_end
  18  0007              #pragma debug struct_end
  18  0007              #pragma debug union_end
  18  0007              #pragma debug union_end
  18  0007              #pragma debug variable 44 1 ___intc0 "__intc0" 1
  18  0007              #pragma debug struct_end
  18  0007              #pragma debug struct_end
  18  0007              #pragma debug union_end
  18  0007              #pragma debug union_end
  18  0007              #pragma debug variable 46 1 ___intc2 "__intc2" 1
  18  0007              extern r1:byte
  18  0007              extern r2:byte
  18  0007              extern r3:byte
  18  0007              extern r4:byte
  18  0007              extern r5:byte
  18  0007              
  18  0007              ; 
  18  0007              ; Generated by holtek-gcc v3.14, Tue Jun 05 09:53:28 2018
  18  0007              ; Rebuild 10
  18  0007              ; end of file


        0 Errors, 0