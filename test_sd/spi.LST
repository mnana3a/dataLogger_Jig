"File: spi.c         Assembler  Version HGASM0202      Page 1


   1  0000              ; Generated by holtek-gcc v3.14, Wed May 30 13:25:15 2018
   2  0000              ; 
   3  0000              ; Configuration:
   4  0000              ;       without long instruction
   5  0000              ;       Single ROM, Multi-RAM
   6  0000              ;       bits_per_rom_unit:16
   7  0000              ;       with mp1
   8  0000              ;       with tbhp, address(0x9)
   9  0000              ;          Use tabrd-const
  10  0000              ;       
  11  0000              ;       
  12  0000              ;       
  13  0000              ; use 'tabrdc' instead of 'tabrd'
  14  0000              ;       
  15  0000              
  16  0000              #pragma translator "holtek-gcc 4.6.4" "3.14" "build 20130711"
  17  0000              ; Rebuild 10
  18  0000              
  19  0000              ir equ [2]
  20  0000              mp equ [3]
  21  0000              sbp equ [1]
  22  0000              acc equ [5]
  23  0000              bp equ [4]
  24  0000              tblp equ [7]
  25  0000              tbhp equ [9]
  26  0000              status equ [10]
  27  0000              c equ [10].0
  28  0000              ac equ [10].1
  29  0000              z equ [10].2
  30  0000              ov equ [10].3
  31  0000              intc equ [11]
  32  0000              
  33  0000              extern ra:byte
  34  0000              extern rb:byte
  35  0000              extern rc:byte
  36  0000              extern rd:byte
  37  0000              extern re:byte
  38  0000              extern rf:byte
  39  0000              extern rg:byte
  40  0000              extern rh:byte
  41  0000              extern _Crom2Prom:near
  42  0000              extern _Crom2PromNext:near
  43  0000              
  44  0000              RAMBANK 0 @HCCINIT, @HCCINIT0
  45  0000              
  46  0000              RAMBANK 0 @BITDATASEC, @BITDATASEC1
  47  0000              @HCCINIT	.section 'data'
  48  0000              @HCCINIT0	.section 'data'
  49  0000              @BITDATASEC	 .section 'data'
  50  0000              @BITDATASEC1	 .section 'data'
  51  0000              
  52  0000              #pragma debug scope 1 1
  53  0000              	extern __DELAY3:near
  54  0000              	extern __DELAYX3:near
  55  0000              	extern __DELAYX6:near
  56  0000              	extern __DELAYY5:near
  57  0000              	extern __DELAYY3:near
  58  0000              	extern _builtin_holtek_delay_2:byte
  59  0000              ___pdc equ [83]
"File: spi.ASM       Assembler  Version HGASM0202      Page 2

  60  0000              ___simc0 equ [69]
  61  0000              ___simc2 equ [72]
  62  0000              public _SPI_init
  63  0000              #pragma debug scope 2 1

  12  0000              #line 12 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  12  0000              _SPI_init .section 'code'
  12  0000              _SPI_init proc
  14  0000              #line 14 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  14  0000  1F00     R  	clr _count[0]
  15  0001              #line 15 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  15  0001  3453        	clr [83].0
  16  0002              #line 16 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  16  0002  1F45        	clr [69]
  17  0003              #line 17 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  17  0003  1F48        	clr [72]
  18  0004              #line 18 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  18  0004  0745        	mov a,[69]
  18  0005  0E1F        	and a,31
  18  0006  0080     E  	mov ra,a
  18  0007  3000     E  	set ra.6
  18  0008  0700     E  	mov a,ra
  18  0009  00C5        	mov [69],a
  19  000A              #line 19 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  19  000A  0FCF        	mov a,207
  19  000B  06C8        	andm a,[72]
  20  000C              #line 20 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  20  000C  31C8        	set [72].3
  21  000D              #line 21 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  21  000D  3148        	set [72].2
  22  000E              #line 22 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  22  000E  30C5        	set [69].1
  22  000F  0003        	ret
  22  0010              _SPI_init endp
  22  0010              #line 22 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  22  0010              #pragma debug scope 1 1
  22  0010              public _SPI_update
  22  0010              #pragma debug scope 3 1
  26  0010              #line 26 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  26  0000              _SPI_update .section 'code'
  26  0000              _SPI_update proc
  26  0000  0003        	ret
  26  0001              _SPI_update endp
  26  0001              #line 26 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  26  0001              #pragma debug scope 1 1
  26  0001              ___simd equ [71]
  26  0001              public _SPI_transmit
  26  0001              #pragma debug scope 4 1
  32  0001              #line 32 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  32  0000              _SPI_transmit .section 'code'
  32  0000              _SPI_transmit proc
  32  0000  00              local _SPI_transmit_2 db 1 dup(?)	; 0,1
  32  0000  0080     E  	mov ra,a
  32  0001  0080     R  	mov _SPI_transmit_2[0],a
  32  0002              #pragma debug variable 8 4 _SPI_transmit_2+0 "_data"
  33  0002              #line 33 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  33  0002  0700     E  	mov a,ra
  33  0003  00C7        	mov [71],a
  33  0004              _L5:
  34  0004              #line 34 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
"File: spi.c         Assembler  Version HGASM0202      Page 3

  34  0004  0748        	mov a,[72]
  34  0005  0E01        	and a,1
  34  0006  0080     E  	mov ra,a
  34  0007  0748        	mov a,[72]
  34  0008  0080     E  	mov rb,a
  34  0009  1F00     E  	clr rc
  34  000A  1400     E  	inca ra
  34  000B  2800     R  	jmp _LI1
  34  000C              _LI2:
  34  000C  340A        	clr c
  34  000D  3C00     E  	sz rc.7
  34  000E  300A        	set c
  34  000F  1B80     E  	rrc rc
  34  0010  1B80     E  	rrc rb
  34  0011              _LI1:
  34  0011  1785        	sdz acc
  34  0012  2800     R  	jmp _LI2
  34  0013  3800     E  	snz rb.0
  34  0014  2800     R  	jmp _L5
  35  0015              #line 35 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  35  0015  3448        	clr [72].0
  36  0016              #line 36 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  36  0016  0747        	mov a,[71]
  36  0017  0080     E  	mov ra,a
  38  0018              #line 38 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  38  0018  0700     E  	mov a,ra
  38  0019  0003        	ret
  38  001A              _SPI_transmit endp
  38  001A              #line 38 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  38  001A              #pragma debug scope 1 1
  38  001A              ___pd equ [82]
  38  001A              public _SPI_cs_enable
  38  001A              #pragma debug scope 5 1
  41  001A              #line 41 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  41  0000              _SPI_cs_enable .section 'code'
  41  0000              _SPI_cs_enable proc
  42  0000              #line 42 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  42  0000  3452        	clr [82].0
  42  0001  0003        	ret
  42  0002              _SPI_cs_enable endp
  42  0002              #line 42 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  42  0002              #pragma debug scope 1 1
  42  0002              public _SPI_cs_disable
  42  0002              #pragma debug scope 6 1
  46  0002              #line 46 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  46  0000              _SPI_cs_disable .section 'code'
  46  0000              _SPI_cs_disable proc
  47  0000              #line 47 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  47  0000  3052        	set [82].0
  47  0001  0003        	ret
  47  0002              _SPI_cs_disable endp
  47  0002              #line 47 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
  47  0002              #pragma debug scope 1 1
  47  0002              public _count
  47  0000              @HCCINIT	.section 'data'
   8  0000              #line 8 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
   8  0000              @HCCINIT .section 'data'
   8  0000              _count label byte
   8  0000              #pragma debug variable 8 1 _count "count"
   8  0000              	db 0
"File: spi.c         Assembler  Version HGASM0202      Page 4

   8  0000              @ROMDATA_BASE .section inpage 'code'
   8  0000              	db 0
   8  0001              @HCCINIT .section 'data'
   7  0001              #line 7 "E:\1_TOSHIBA\Projects\voltage_stabilizer\DataLoggerJig\proj\test_sd\spi.c"
   7  0001              public _res
   7  0000              @HCCINIT0 .section 'data'
   7  0000              _res	db 0
   7  0001              #pragma debug variable 8 1 _res "res"
   7  0001              
   7  0001              @HCCINIT .section 'data'
   7  0001              #pragma debug struct_end
   7  0001              #pragma debug struct_end
   7  0001              #pragma debug union_end
   7  0001              #pragma debug union_end
   7  0001              #pragma debug variable 43 1 ___simc0 "__simc0" 1
   7  0001              #pragma debug variable 8 1 ___simd "__simd" 1
   7  0001              #pragma debug struct_end
   7  0001              #pragma debug struct_end
   7  0001              #pragma debug union_end
   7  0001              #pragma debug union_end
   7  0001              #pragma debug variable 45 1 ___simc2 "__simc2" 1
   7  0001              #pragma debug struct_end
   7  0001              #pragma debug struct_end
   7  0001              #pragma debug union_end
   7  0001              #pragma debug union_end
   7  0001              #pragma debug variable 47 1 ___pd "__pd" 1
   7  0001              #pragma debug struct_end
   7  0001              #pragma debug struct_end
   7  0001              #pragma debug union_end
   7  0001              #pragma debug union_end
   7  0001              #pragma debug variable 49 1 ___pdc "__pdc" 1
   7  0001              
   7  0001              ; 
   7  0001              ; Generated by holtek-gcc v3.14, Wed May 30 13:25:15 2018
   7  0001              ; Rebuild 10
   7  0001              ; end of file


        0 Errors, 0